<!-- meta-data title: Life not a marathon -->
<!-- meta-data searchtitle: life-not-a-marathon -->
<!-- meta-data date: 28 Dec 2023 -->
<!-- meta-data intro: Some tips for running and life from 16 years of running -->
<!-- meta-data author: Mike Harris  -->
<!-- meta-data category: thoughts -->
<!-- meta-data twitterimage: https://blog.mikemjharris.com/images/retro-2022/norway.jpg  -->
<!-- meta-data twittercard: summary_large_image -->

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://unpkg.com/simple-statistics@7.8.3/dist/simple-statistics.min.js"></script>
<p>
  2022 offered all the delights of a more open world - a craving for expanded horizons, wilderness and to experience remote work without being stuck at home. These were all sampled and enjoyed with the only cloud being a bad back colouring the experiences.
</p>
<div id="my_dataviz"></div>
<div class="table-container">
<table border="1">
<thead>
    <tr>
        <th>Date</th>
        <th>Event</th>
        <th>Time</th>
        <th>Run (km)</th>
        <th>Swim (km)</th>
        <th>Yoga</th>
        <th>Gym</th>
    </tr>
  </thead>
  <tbody>
    <tr>
    </tr>
    <tr>
        <td>7-Nov-04</td>
        <td>New York</td>
        <td>3:25:16</td>
        <td>300</td>
        <td>0</td>
        <td>0</td>
        <td>Low</td>
    </tr>
    <tr>
        <td>13-Apr-08</td>
        <td>London</td>
        <td>2:55:05</td>
        <td>540</td>
        <td>0</td>
        <td>14</td>
        <td>High</td>
    </tr>
    <tr>
        <td>28-Sep-08</td>
        <td>Berlin</td>
        <td>2:54:28</td>
        <td>520</td>
        <td>0</td>
        <td>8</td>
        <td>Medium</td>
    </tr>
    <tr>
        <td>10-Oct-10</td>
        <td>Chicago</td>
        <td>3:24:32</td>
        <td>450</td>
        <td>0</td>
        <td>6</td>
        <td>Medium</td>
    </tr>
    <tr>
        <td>10-Apr-11</td>
        <td>Paris</td>
        <td>3:19:16</td>
        <td>760</td>
        <td>0</td>
        <td>13</td>
        <td>High</td>
    </tr>
    <tr>
        <td>17-Apr-11</td>
        <td>London</td>
        <td>2:50:17</td>
        <td>800</td>
        <td>0</td>
        <td>13</td>
        <td>High</td>
    </tr>
    <tr>
        <td>16-Apr-12</td>
        <td>Boston</td>
        <td>3:45:28</td>
        <td>720</td>
        <td>0</td>
        <td>10</td>
        <td>Medium</td>
    </tr>
    <tr>
        <td>30-Sep-12</td>
        <td>Berlin</td>
        <td>3:16:08</td>
        <td>440</td>
        <td>6</td>
        <td>16</td>
        <td>Medium</td>
    </tr>
    <tr>
        <td>21-Apr-13</td>
        <td>London</td>
        <td>2:48:24</td>
        <td>1050</td>
        <td>0</td>
        <td>45</td>
        <td>Medium</td>
    </tr>
    <tr>
        <td>28-Feb-16</td>
        <td>Tokyo</td>
        <td>2:59:14</td>
        <td>620</td>
        <td>25</td>
        <td>38</td>
        <td>Low</td>
    </tr>
    <tr>
        <td>25-Apr-16</td>
        <td>London</td>
        <td>3:14:55</td>
        <td>415</td>
        <td>28</td>
        <td>26</td>
        <td>Low</td>
    </tr>
    <tr>
        <td>1-Apr-17</td>
        <td>Paris</td>
        <td>3:28:28</td>
        <td>480</td>
        <td>35</td>
        <td>19</td>
        <td>Low</td>
    </tr>
    <tr>
        <td>28-Apr-19</td>
        <td>London</td>
        <td>3:43:22</td>
        <td>1150</td>
        <td>8</td>
        <td>33</td>
        <td>Low</td>
    </tr>
    <tr>
        <td>2-Dec-23</td>
        <td>Valencia</td>
        <td>2:58:48</td>
        <td>715</td>
        <td>25</td>
        <td>45</td>
        <td>Medium</td>
    </tr>
  </tbody>
</table>
</div>  
<h4></h4>
<p></p>

<figure>
  <img alt="" src="" />
  <figcaption></figcaption>
</figure>
<h4></h4>

<script>

  // set the dimensions and margins of the graph
  var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

  // append the svg object to the body of the page
  var svg = d3.select("#my_dataviz")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
      "translate(" + margin.left + "," + margin.top + ")");

  //Read the data
  d3.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vS269BnblrqA7mvGzg-J-BtOH0aVBmTSdPAX6tTs9g4j5TjHrgQRv93Da-FoHRd-9N_T6xxMALZEYQf/pub?gid=727891094&single=true&output=csv&12", function(data) {

    // Add X axis
    var x = d3.scaleLinear()
      .domain([400, 1200])
      .range([ 0, width ]);
    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));


    // Add Y axis
    var y = d3.scaleLinear()
      .domain([-20, 30])
      .range([ height, 30]);
    svg.append("g")
      .call(d3.axisLeft(y));

    var groups = svg.selectAll("g")
    .data(data)
    .enter().append("g");

    // Add dots
    svg.append('g')
      .selectAll("dot")
      .data(data)
      .enter()
      .append("circle")
      .attr("cx", function (d) { return x(d.Distance); } )
      .attr("cy", function (d) { return y(d.Time); } )
      .attr("r", 5)
      .style("fill", "#69b3a2")


    svg.append('g')
      .selectAll("dot")
      .data(data)
      .enter()
      .append("text")
      .text(function(d) { return d.Location; })
      .attr("x", function (d) { return x(d.Distance) + 10; } )
      .attr("y", function (d) { return y(d.Time); } )
      .attr("text-anchor", "left") // Center the text
      .attr("dy", ".35em")
      .attr("font-family", "sans-serif")
      .attr("font-size", "8px")
      .attr("fill", "black")
      .style("visibility", "hidden");

    groups.on("mouseover", function(d, i) {
    d3.select(this).select("text").style("visibility", "visible");
}).on("mouseout", function(d, i) {
    d3.select(this).select("text").style("visibility", "hidden");
});

     const linearRegression = ss.linearRegression(data.map(d => [d.Distance, d.Time]))
   const linearRegressionLine = ss.linearRegressionLine(linearRegression) 
     const firstX = data[0].Distance;
     const lastX = data.slice(-1)[0].Distance;
     const xCoordinates = [firstX, lastX];
     const regressionPoints = xCoordinates.map(d => ({
       x: d * 1,                         // We pick x and y arbitrarily, just make sure they match d3.line accessors
       y: 10 
     }));
   console.log(regressionPoints)
    line = d3.line()
       .x(d => x(d.x))
       .y(d => y(d.y))
  console.log('xx', regressionPoints)
     svg.append('line')
       .style("stroke", "lightgreen")
    .style("stroke-width", 10)
    .attr("x1", 0)
    .attr("y1", 0)
    .attr("x2", 200)
    .attr("y2", 200); 
    
  })

</script>
